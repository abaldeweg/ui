version: 2.1
orbs:
  cypress: cypress-io/cypress@2.0.0
executors:
  image:
    docker:
      - image: 'cypress/base:16.14.2'
workflows:
  test:
    jobs:
      - cypress/run:
          executor: image
          yarn: true
          command: yarn workspace @baldeweg/ui build && yarn workspace @baldeweg/ui test:unit:ci
      - cypress/run:
          executor: image
          yarn: true
          command: ./node_modules/.bin/lerna link && yarn workspace @baldeweg/web-demo build && yarn workspace @baldeweg/web-demo test:e2e:ci
